# 🔧 教材管理页面完整测试指南

## 📋 测试前准备

### 1. 确保服务运行
```bash
# 在 server 目录下启动后端服务
cd server && npm start
```

### 2. 确认测试数据
✅ **测试数据已就绪**：
- 数学题目：4道（1年级1道，2年级1道，3年级1道，4年级1道）
- 语文题目：1道（1年级）
- 英语题目：1道（3年级）
- 总计：6道测试题目

### 3. 打开微信开发者工具
- 导入项目：选择 `miniprogram` 目录
- 设置网络：勾选"不校验合法域名、web-view、TLS版本"

## 🎯 功能测试步骤

### 第一步：访问管理页面

**方法一：直接编译访问**
1. 在微信开发者工具中点击"编译"
2. 在页面路径中输入：`pages/materials/materials`
3. 点击确认

**方法二：添加编译模式**
1. 点击"编译" → "添加编译模式"
2. 模式名称：教材管理
3. 启动页面：`pages/materials/materials`
4. 保存并编译

### 第二步：基础界面测试

**✅ 页面布局检查**
- [ ] 页面正常加载，显示4个标签页
- [ ] 标签页切换正常（数据导入、搜索题目、数据统计、PDF提取）
- [ ] 整体样式和布局符合设计要求

### 第三步：功能模块详细测试

#### 📊 **标签1：数据导入**

**A. 文件上传功能**
- [ ] 点击"选择文件"按钮，文件选择器正常打开
- [ ] 上传进度条显示正常
- [ ] 错误提示和成功提示正常显示

**B. 模板下载**
- [ ] 点击"下载模板"按钮
- [ ] 检查是否提供Excel模板下载链接

**C. 手动录入**
- [ ] 点击"手动录入"按钮
- [ ] 录入表单正常显示和提交

#### 🔍 **标签2：搜索题目**

**A. 筛选器测试**
- [ ] **学科筛选**：数学、语文、英语选项正常
- [ ] **年级筛选**：1-6年级选项正常
- [ ] **难度筛选**：简单、普通、困难选项正常
- [ ] **题目类型**：各类型选项正常

**B. 搜索功能测试**
1. **不加任何条件搜索**
   - 应该显示6道测试题目
   
2. **按学科搜索**
   - 选择"数学"：应显示4道题目
   - 选择"语文"：应显示1道题目
   - 选择"英语"：应显示1道题目

3. **按年级搜索**
   - 选择"1年级"：应显示2道题目（数学1道+语文1道）
   - 选择"2年级"：应显示1道题目
   - 选择"3年级"：应显示2道题目（数学1道+英语1道）
   - 选择"4年级"：应显示1道题目

4. **按难度搜索**
   - 选择"简单"：应显示4道题目
   - 选择"普通"：应显示2道题目

5. **组合筛选**
   - 数学+1年级：应显示1道题目
   - 数学+简单：应显示3道题目

**C. 关键词搜索**
- [ ] 搜索"加法"：应找到加法相关题目
- [ ] 搜索"苹果"：应找到应用题
- [ ] 搜索"正方形"：应找到几何题目

#### 📈 **标签3：数据统计**

**A. 总体统计卡片**
- [ ] 总题目数：应显示 6
- [ ] 学科覆盖：应显示 3（数学、语文、英语）
- [ ] 年级覆盖：应显示 4（1、2、3、4年级）
- [ ] 平均用时：应显示合理数值

**B. 学科分布图表**
- [ ] 数学：4道题目
- [ ] 语文：1道题目  
- [ ] 英语：1道题目

**C. 年级分布**
- [ ] 各年级题目数量正确显示

#### 📄 **标签4：PDF提取**

**A. 功能说明**
- [ ] 使用说明文字显示正确
- [ ] GitHub链接可以点击

**B. 参数设置**
- [ ] 学科选择器正常
- [ ] 年级选择器正常
- [ ] 最大题目数设置正常

**C. 文件上传**
- [ ] PDF文件选择器正常打开
- [ ] 上传区域响应正常

## 🧪 API 接口测试

### 直接API测试（可选）

在浏览器中访问这些URL，验证后端功能：

```
1. 健康检查
http://localhost:3000/health

2. 搜索所有题目
http://localhost:3000/api/materials/search

3. 按学科搜索（数学）
http://localhost:3000/api/materials/search?subject=math

4. 按年级搜索（3年级）
http://localhost:3000/api/materials/search?grade=3

5. 数据统计
http://localhost:3000/api/materials/stats
```

## ✅ 测试完成检查清单

### 基础功能
- [ ] 页面正常加载和渲染
- [ ] 4个标签页正常切换
- [ ] 基本样式和布局正确

### 搜索功能
- [ ] 无条件搜索返回6道题目
- [ ] 学科筛选功能正常
- [ ] 年级筛选功能正常
- [ ] 难度筛选功能正常
- [ ] 组合筛选功能正常
- [ ] 关键词搜索功能正常

### 统计功能  
- [ ] 总体统计数据正确
- [ ] 学科分布数据正确
- [ ] 年级分布数据正确

### 界面交互
- [ ] 所有按钮响应正常
- [ ] 表单交互正常
- [ ] 错误提示正常显示
- [ ] 成功反馈正常显示

## 🔧 常见问题排查

### 1. 页面显示空白
**原因**：网络设置问题
**解决**：在微信开发者工具中勾选"不校验合法域名"

### 2. 搜索结果为空
**原因**：测试数据未正确加载
**解决**：重新运行测试数据脚本：`cd server && node test-materials.js`

### 3. API请求失败
**原因**：后端服务未启动
**解决**：确保在server目录下运行了`npm start`

### 4. 页面报错
**原因**：代码或配置问题
**解决**：检查控制台错误信息，查看具体错误原因

## 🎉 测试成功标准

当以下所有条件都满足时，表示管理页面测试成功：

1. ✅ 页面能正常加载和显示
2. ✅ 4个标签页都能正常切换
3. ✅ 搜索功能能返回正确的题目数量
4. ✅ 统计功能显示正确的数据
5. ✅ 所有交互功能响应正常
6. ✅ 测试数据能被正确查询和显示

**🎊 恭喜！当所有测试通过后，你的教材管理页面就完全可用了！** 