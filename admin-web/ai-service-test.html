<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¤– AIæœåŠ¡éªŒè¯æµ‹è¯•</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            background: #fafafa;
        }
        .test-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
            transition: all 0.3s ease;
        }
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .test-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        .result {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            white-space: pre-wrap;
            font-family: monospace;
            max-height: 300px;
            overflow-y: auto;
        }
        .success { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
        .error { background: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; }
        .warning { background: #fff3cd; border: 1px solid #ffeaa7; color: #856404; }
        .info { background: #e2e3ff; border: 1px solid #b8b9ff; color: #0c5460; }
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        .status-real { background: #28a745; }
        .status-mock { background: #dc3545; }
        .status-unknown { background: #ffc107; }
        .input-section {
            margin: 15px 0;
        }
        .input-section input, .input-section textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin: 5px 0;
        }
        .verification-items {
            margin: 15px 0;
        }
        .verification-item {
            display: flex;
            align-items: center;
            margin: 8px 0;
            padding: 8px;
            background: white;
            border-radius: 5px;
            border-left: 4px solid #ddd;
        }
        .verification-item.pass {
            border-left-color: #28a745;
            background: #f8fff9;
        }
        .verification-item.fail {
            border-left-color: #dc3545;
            background: #fff8f8;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¤– AIæœåŠ¡çœŸå®æ€§éªŒè¯</h1>
            <p>éªŒè¯AIç­”ç–‘æœåŠ¡æ˜¯å¦ä½¿ç”¨çœŸå®çš„å¤§è¯­è¨€æ¨¡å‹</p>
            <div id="overallStatus">
                <span class="status-indicator status-unknown"></span>
                <span>æ£€æµ‹ä¸­...</span>
            </div>
        </div>

        <!-- é…ç½®æ£€æŸ¥ -->
        <div class="test-section">
            <h3>ğŸ”§ 1. é…ç½®æ£€æŸ¥</h3>
            <button class="test-button" onclick="checkConfiguration()">æ£€æŸ¥APIé…ç½®</button>
            <div id="configResult" class="result"></div>
        </div>

        <!-- AIæ¨¡å‹è°ƒç”¨æµ‹è¯• -->
        <div class="test-section">
            <h3>ğŸ¯ 2. AIæ¨¡å‹è°ƒç”¨æµ‹è¯•</h3>
            <button class="test-button" onclick="testAIResponse()">æµ‹è¯•çœŸå®AIå“åº”</button>
            <button class="test-button" onclick="testComplexMath()">æµ‹è¯•å¤æ‚æ•°å­¦é¢˜</button>
            <button class="test-button" onclick="testCreativeTask()">æµ‹è¯•åˆ›é€ æ€§ä»»åŠ¡</button>
            <div id="aiTestResult" class="result"></div>
        </div>

        <!-- ç­”ç–‘åŠŸèƒ½æµ‹è¯• -->
        <div class="test-section">
            <h3>ğŸ’¬ 3. ç­”ç–‘åŠŸèƒ½æµ‹è¯•</h3>
            <div class="input-section">
                <input type="text" id="testQuestion" placeholder="è¾“å…¥æµ‹è¯•é¢˜ç›®" value="3 + 5 = ?">
                <input type="text" id="testInput" placeholder="è¾“å…¥å­¦ç”Ÿå›ç­”" value="æˆ‘ä¸çŸ¥é“æ€ä¹ˆç®—">
            </div>
            <button class="test-button" onclick="testTutoring()">æµ‹è¯•AIç­”ç–‘</button>
            <button class="test-button" onclick="testHint()">æµ‹è¯•æ™ºèƒ½æç¤º</button>
            <button class="test-button" onclick="testAnswerCheck()">æµ‹è¯•ç­”æ¡ˆæ£€æŸ¥</button>
            <div id="tutoringResult" class="result"></div>
        </div>

        <!-- éªŒè¯ç»“æœ -->
        <div class="test-section">
            <h3>âœ… 4. çœŸå®æ€§éªŒè¯ç»“æœ</h3>
            <div id="verificationResults" class="verification-items">
                <div class="verification-item" id="verify-api">
                    <span class="status-indicator status-unknown"></span>
                    <span>APIå¯†é’¥é…ç½®æ£€æŸ¥</span>
                </div>
                <div class="verification-item" id="verify-response">
                    <span class="status-indicator status-unknown"></span>
                    <span>çœŸå®AIå“åº”æ£€æŸ¥</span>
                </div>
                <div class="verification-item" id="verify-complexity">
                    <span class="status-indicator status-unknown"></span>
                    <span>å¤æ‚æ¨ç†èƒ½åŠ›æ£€æŸ¥</span>
                </div>
                <div class="verification-item" id="verify-tutoring">
                    <span class="status-indicator status-unknown"></span>
                    <span>ç­”ç–‘åŠŸèƒ½çœŸå®æ€§æ£€æŸ¥</span>
                </div>
            </div>
        </div>

        <!-- ä¿®å¤å»ºè®® -->
        <div class="test-section" id="fixSuggestions" style="display: none;">
            <h3>ğŸ”§ ä¿®å¤å»ºè®®</h3>
            <div id="suggestions"></div>
        </div>
    </div>

    <script>
        const API_BASE = 'http://192.168.31.180:3000/api';
        let verificationResults = {};

        async function makeRequest(url, options = {}) {
            try {
                const response = await fetch(API_BASE + url, {
                    headers: {
                        'Content-Type': 'application/json',
                        ...options.headers
                    },
                    ...options
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                return await response.json();
            } catch (error) {
                throw new Error(`è¯·æ±‚å¤±è´¥: ${error.message}`);
            }
        }

        function updateResult(elementId, content, type = 'info') {
            const element = document.getElementById(elementId);
            element.textContent = content;
            element.className = `result ${type}`;
        }

        function updateVerification(itemId, passed, message) {
            const item = document.getElementById(itemId);
            const indicator = item.querySelector('.status-indicator');
            const text = item.querySelector('span:last-child');
            
            indicator.className = `status-indicator ${passed ? 'status-real' : 'status-mock'}`;
            text.textContent = message;
            item.className = `verification-item ${passed ? 'pass' : 'fail'}`;
            
            verificationResults[itemId] = passed;
            updateOverallStatus();
        }

        function updateOverallStatus() {
            const passed = Object.values(verificationResults).filter(v => v).length;
            const total = Object.keys(verificationResults).length;
            const statusEl = document.getElementById('overallStatus');
            
            if (total === 0) return;
            
            if (passed === total) {
                statusEl.innerHTML = '<span class="status-indicator status-real"></span><span>âœ… AIæœåŠ¡ä½¿ç”¨çœŸå®æ¨¡å‹</span>';
            } else if (passed > 0) {
                statusEl.innerHTML = '<span class="status-indicator status-unknown"></span><span>âš ï¸ éƒ¨åˆ†åŠŸèƒ½ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®</span>';
                showFixSuggestions();
            } else {
                statusEl.innerHTML = '<span class="status-indicator status-mock"></span><span>âŒ AIæœåŠ¡ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®</span>';
                showFixSuggestions();
            }
        }

        function showFixSuggestions() {
            const suggestionsEl = document.getElementById('suggestions');
            const fixSection = document.getElementById('fixSuggestions');
            
            let suggestions = [];
            
            if (!verificationResults['verify-api']) {
                suggestions.push('ğŸ”‘ æ£€æŸ¥APIå¯†é’¥é…ç½®æ˜¯å¦æ­£ç¡®');
            }
            if (!verificationResults['verify-response']) {
                suggestions.push('ğŸŒ æ£€æŸ¥ç½‘ç»œè¿æ¥å’ŒAPIæœåŠ¡çŠ¶æ€');
            }
            if (!verificationResults['verify-complexity']) {
                suggestions.push('ğŸ§  å¯èƒ½åœ¨ä½¿ç”¨ç®€åŒ–çš„æœ¬åœ°å›å¤è€ŒéçœŸå®AI');
            }
            if (!verificationResults['verify-tutoring']) {
                suggestions.push('ğŸ’¬ ç­”ç–‘åŠŸèƒ½å¯èƒ½å­˜åœ¨fallbackæœºåˆ¶');
            }
            
            if (suggestions.length > 0) {
                suggestionsEl.innerHTML = suggestions.map(s => `<div style="margin: 8px 0; padding: 8px; background: #fff3cd; border-radius: 5px;">${s}</div>`).join('');
                fixSection.style.display = 'block';
            }
        }

        async function checkConfiguration() {
            updateResult('configResult', 'æ­£åœ¨æ£€æŸ¥é…ç½®...', 'info');
            
            try {
                const response = await makeRequest('/ai-models/overview');
                
                if (response.success) {
                    const config = response.data;
                    let result = `âœ… APIé…ç½®æ£€æŸ¥é€šè¿‡\n\n`;
                    result += `ğŸ”‘ APIå¯†é’¥: ${config.apiKey ? 'å·²é…ç½®' : 'æœªé…ç½®'}\n`;
                    result += `ğŸŒ åŸºç¡€URL: ${config.baseUrl || 'N/A'}\n`;
                    result += `ğŸ“¡ å¯ç”¨æ¨¡å‹: ${config.availableModels?.join(', ') || 'N/A'}\n`;
                    result += `âš¡ é»˜è®¤è¶…æ—¶: ${config.timeout || 'N/A'}ms\n`;
                    
                    updateResult('configResult', result, 'success');
                    updateVerification('verify-api', !!config.apiKey, config.apiKey ? 'APIå¯†é’¥å·²æ­£ç¡®é…ç½®' : 'APIå¯†é’¥æœªé…ç½®');
                } else {
                    throw new Error(response.message || 'é…ç½®æ£€æŸ¥å¤±è´¥');
                }
            } catch (error) {
                updateResult('configResult', `âŒ é…ç½®æ£€æŸ¥å¤±è´¥: ${error.message}`, 'error');
                updateVerification('verify-api', false, 'APIé…ç½®æ£€æŸ¥å¤±è´¥');
            }
        }

        async function testAIResponse() {
            updateResult('aiTestResult', 'æ­£åœ¨æµ‹è¯•AIå“åº”...', 'info');
            
            try {
                const response = await makeRequest('/ai-chat/tutoring', {
                    method: 'POST',
                    body: JSON.stringify({
                        question: 'è¯·è¯´ä¸€å¥åªæœ‰çœŸå®AIæ‰èƒ½è¯´å‡ºçš„ç‹¬ç‰¹è¯è¯­ï¼ŒåŒ…å«å½“å‰æ—¶é—´å’Œä¸€ä¸ªéšæœºæ•°å­—',
                        studentInput: 'æµ‹è¯•çœŸå®æ€§',
                        subject: 'math',
                        grade: 1,
                        currentStep: 'understanding'
                    })
                });
                
                if (response.success) {
                    const aiReply = response.data.aiResponse;
                    const responseTime = response.data.responseTime;
                    const model = response.data.model;
                    
                    let result = `âœ… AIå“åº”æˆåŠŸ\n\n`;
                    result += `ğŸ¤– ä½¿ç”¨æ¨¡å‹: ${model}\n`;
                    result += `â±ï¸ å“åº”æ—¶é—´: ${responseTime}ms\n`;
                    result += `ğŸ’¬ AIå›å¤: ${aiReply}\n\n`;
                    
                    // æ£€æŸ¥å›å¤çš„çœŸå®æ€§æŒ‡æ ‡
                    const isReal = analyzeResponseRealism(aiReply, responseTime);
                    result += `ğŸ” çœŸå®æ€§åˆ†æ: ${isReal.score}/10åˆ†\n`;
                    result += `ğŸ“Š åˆ†æè¯¦æƒ…: ${isReal.details.join(', ')}`;
                    
                    updateResult('aiTestResult', result, isReal.score >= 7 ? 'success' : 'warning');
                    updateVerification('verify-response', isReal.score >= 7, `AIå“åº”çœŸå®æ€§: ${isReal.score}/10åˆ†`);
                } else {
                    throw new Error(response.message || 'AIå“åº”å¤±è´¥');
                }
            } catch (error) {
                updateResult('aiTestResult', `âŒ AIæµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
                updateVerification('verify-response', false, 'AIå“åº”æµ‹è¯•å¤±è´¥');
            }
        }

        async function testComplexMath() {
            updateResult('aiTestResult', 'æ­£åœ¨æµ‹è¯•å¤æ‚æ•°å­¦æ¨ç†...', 'info');
            
            try {
                const response = await makeRequest('/ai-chat/tutoring', {
                    method: 'POST',
                    body: JSON.stringify({
                        question: 'å¦‚æœä¸€ä¸ªæ­£æ–¹å½¢çš„é¢ç§¯æ˜¯64å¹³æ–¹å˜ç±³ï¼Œé‚£ä¹ˆå®ƒçš„å‘¨é•¿æ˜¯å¤šå°‘å˜ç±³ï¼Ÿè¯·ä¸€æ­¥æ­¥æ¨ç†ã€‚',
                        studentInput: 'æˆ‘éœ€è¦è¯¦ç»†çš„è§£é¢˜æ€è·¯',
                        subject: 'math',
                        grade: 4,
                        currentStep: 'understanding'
                    })
                });
                
                if (response.success) {
                    const aiReply = response.data.aiResponse;
                    const complexity = analyzeComplexity(aiReply);
                    
                    let result = `ğŸ§® å¤æ‚æ•°å­¦æµ‹è¯•ç»“æœ\n\n`;
                    result += `ğŸ’¬ AIå›å¤: ${aiReply}\n\n`;
                    result += `ğŸ§  å¤æ‚åº¦åˆ†æ: ${complexity.score}/10åˆ†\n`;
                    result += `ğŸ“ åŒ…å«æ¨ç†: ${complexity.hasReasoning ? 'æ˜¯' : 'å¦'}\n`;
                    result += `ğŸ”¢ åŒ…å«è®¡ç®—: ${complexity.hasMath ? 'æ˜¯' : 'å¦'}\n`;
                    result += `ğŸ“š åŒ…å«æ¦‚å¿µ: ${complexity.hasConcepts ? 'æ˜¯' : 'å¦'}`;
                    
                    updateResult('aiTestResult', result, complexity.score >= 6 ? 'success' : 'warning');
                    updateVerification('verify-complexity', complexity.score >= 6, `å¤æ‚æ¨ç†èƒ½åŠ›: ${complexity.score}/10åˆ†`);
                } else {
                    throw new Error(response.message || 'å¤æ‚æ•°å­¦æµ‹è¯•å¤±è´¥');
                }
            } catch (error) {
                updateResult('aiTestResult', `âŒ å¤æ‚æ•°å­¦æµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
                updateVerification('verify-complexity', false, 'å¤æ‚æ¨ç†æµ‹è¯•å¤±è´¥');
            }
        }

        async function testCreativeTask() {
            updateResult('aiTestResult', 'æ­£åœ¨æµ‹è¯•åˆ›é€ æ€§ä»»åŠ¡...', 'info');
            
            try {
                const response = await makeRequest('/ai-chat/tutoring', {
                    method: 'POST',
                    body: JSON.stringify({
                        question: 'è¯·ç”¨ä¸€ä¸ªæœ‰è¶£çš„æ•…äº‹æ¥è§£é‡Šä¸ºä»€ä¹ˆ1+1=2',
                        studentInput: 'æˆ‘æƒ³å¬æ•…äº‹',
                        subject: 'math',
                        grade: 1,
                        currentStep: 'understanding'
                    })
                });
                
                if (response.success) {
                    const aiReply = response.data.aiResponse;
                    const creativity = analyzeCreativity(aiReply);
                    
                    let result = `ğŸ¨ åˆ›é€ æ€§ä»»åŠ¡æµ‹è¯•ç»“æœ\n\n`;
                    result += `ğŸ’¬ AIå›å¤: ${aiReply}\n\n`;
                    result += `âœ¨ åˆ›é€ æ€§åˆ†æ: ${creativity.score}/10åˆ†\n`;
                    result += `ğŸ“– åŒ…å«æ•…äº‹: ${creativity.hasStory ? 'æ˜¯' : 'å¦'}\n`;
                    result += `ğŸ­ ç”ŸåŠ¨æè¿°: ${creativity.isVivid ? 'æ˜¯' : 'å¦'}\n`;
                    result += `ğŸ”„ åŸåˆ›å†…å®¹: ${creativity.isOriginal ? 'æ˜¯' : 'å¦'}`;
                    
                    updateResult('aiTestResult', result, creativity.score >= 6 ? 'success' : 'warning');
                } else {
                    throw new Error(response.message || 'åˆ›é€ æ€§æµ‹è¯•å¤±è´¥');
                }
            } catch (error) {
                updateResult('aiTestResult', `âŒ åˆ›é€ æ€§æµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
            }
        }

        async function testTutoring() {
            updateResult('tutoringResult', 'æ­£åœ¨æµ‹è¯•ç­”ç–‘åŠŸèƒ½...', 'info');
            
            const question = document.getElementById('testQuestion').value;
            const studentInput = document.getElementById('testInput').value;
            
            try {
                const response = await makeRequest('/ai-chat/tutoring', {
                    method: 'POST',
                    body: JSON.stringify({
                        question,
                        studentInput,
                        subject: 'math',
                        grade: 1,
                        currentStep: 'understanding'
                    })
                });
                
                if (response.success) {
                    const data = response.data;
                    let result = `ğŸ’¬ ç­”ç–‘æµ‹è¯•æˆåŠŸ\n\n`;
                    result += `ğŸ¤– æ¨¡å‹: ${data.model}\n`;
                    result += `â±ï¸ å“åº”æ—¶é—´: ${data.responseTime}ms\n`;
                    result += `ğŸ“ AIå›å¤: ${data.aiResponse}\n`;
                    result += `ğŸ“Š å“åº”ç±»å‹: ${data.responseType}\n`;
                    result += `ğŸ¯ å½“å‰æ­¥éª¤: ${data.currentStep}`;
                    
                    const isRealTutoring = analyzeTutoringRealism(data.aiResponse, data.responseTime);
                    result += `\n\nğŸ” ç­”ç–‘çœŸå®æ€§: ${isRealTutoring.score}/10åˆ†`;
                    
                    updateResult('tutoringResult', result, isRealTutoring.score >= 7 ? 'success' : 'warning');
                    updateVerification('verify-tutoring', isRealTutoring.score >= 7, `ç­”ç–‘åŠŸèƒ½çœŸå®æ€§: ${isRealTutoring.score}/10åˆ†`);
                } else {
                    throw new Error(response.message || 'ç­”ç–‘æµ‹è¯•å¤±è´¥');
                }
            } catch (error) {
                updateResult('tutoringResult', `âŒ ç­”ç–‘æµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
                updateVerification('verify-tutoring', false, 'ç­”ç–‘åŠŸèƒ½æµ‹è¯•å¤±è´¥');
            }
        }

        async function testHint() {
            const question = document.getElementById('testQuestion').value;
            
            try {
                const response = await makeRequest('/ai-chat/hint', {
                    method: 'POST',
                    body: JSON.stringify({
                        question,
                        context: 'å­¦ç”Ÿéœ€è¦è§£é¢˜æç¤º',
                        subject: 'math',
                        grade: 1
                    })
                });
                
                if (response.success) {
                    let result = document.getElementById('tutoringResult').textContent + '\n\n';
                    result += `ğŸ’¡ æ™ºèƒ½æç¤ºæµ‹è¯•:\n`;
                    result += `æç¤ºå†…å®¹: ${response.data.hint}\n`;
                    result += `å“åº”æ—¶é—´: ${response.data.responseTime}ms`;
                    
                    updateResult('tutoringResult', result, 'success');
                } else {
                    throw new Error(response.message || 'æç¤ºæµ‹è¯•å¤±è´¥');
                }
            } catch (error) {
                updateResult('tutoringResult', `âŒ æç¤ºæµ‹è¯•å¤±è´¥: ${error.message}`, 'error');
            }
        }

        async function testAnswerCheck() {
            const question = document.getElementById('testQuestion').value;
            
            try {
                const response = await makeRequest('/ai-chat/check-answer', {
                    method: 'POST',
                    body: JSON.stringify({
                        question,
                        studentAnswer: '8',
                        subject: 'math',
                        grade: 1
                    })
                });
                
                if (response.success) {
                    let result = document.getElementById('tutoringResult').textContent + '\n\n';
                    result += `âœ… ç­”æ¡ˆæ£€æŸ¥æµ‹è¯•:\n`;
                    result += `æ˜¯å¦æ­£ç¡®: ${response.data.isCorrect}\n`;
                    result += `åé¦ˆ: ${response.data.feedback}\n`;
                    result += `å“åº”æ—¶é—´: ${response.data.responseTime}ms`;
                    
                    updateResult('tutoringResult', result, 'success');
                } else {
                    throw new Error(response.message || 'ç­”æ¡ˆæ£€æŸ¥å¤±è´¥');
                }
            } catch (error) {
                updateResult('tutoringResult', `âŒ ç­”æ¡ˆæ£€æŸ¥å¤±è´¥: ${error.message}`, 'error');
            }
        }

        function analyzeResponseRealism(reply, responseTime) {
            let score = 0;
            let details = [];
            
            // å“åº”æ—¶é—´åˆ†æ (çœŸå®AIé€šå¸¸åœ¨500-3000ms)
            if (responseTime >= 500 && responseTime <= 3000) {
                score += 3;
                details.push('å“åº”æ—¶é—´æ­£å¸¸');
            } else if (responseTime < 500) {
                score += 1;
                details.push('å“åº”è¿‡å¿«å¯èƒ½æ˜¯ç¼“å­˜');
            } else {
                score += 2;
                details.push('å“åº”è¾ƒæ…¢ä½†å¯èƒ½æ˜¯çœŸå®AI');
            }
            
            // å†…å®¹å¤æ‚åº¦åˆ†æ
            if (reply.length > 50) {
                score += 2;
                details.push('å›å¤é•¿åº¦é€‚ä¸­');
            }
            
            // æ˜¯å¦åŒ…å«éšæœºå…ƒç´ 
            if (reply.includes('éšæœº') || reply.includes('æ—¶é—´') || /\d+/.test(reply)) {
                score += 2;
                details.push('åŒ…å«éšæœºæˆ–æ—¶é—´å…ƒç´ ');
            }
            
            // è¯­è¨€è‡ªç„¶åº¦
            if (!reply.includes('ç¤ºä¾‹') && !reply.includes('æ¨¡æ‹Ÿ')) {
                score += 2;
                details.push('è¯­è¨€è‡ªç„¶');
            }
            
            // æ•™å­¦ä¸“ä¸šæ€§
            if (reply.includes('emoji') || reply.length < 200) {
                score += 1;
                details.push('ç¬¦åˆæ•™å­¦è¦æ±‚');
            }
            
            return { score: Math.min(score, 10), details };
        }

        function analyzeComplexity(reply) {
            let score = 0;
            
            const hasReasoning = reply.includes('å› ä¸º') || reply.includes('æ‰€ä»¥') || reply.includes('æ­¥éª¤') || reply.includes('é¦–å…ˆ');
            const hasMath = /\d+/.test(reply) && (reply.includes('=') || reply.includes('Ã—') || reply.includes('Ã·'));
            const hasConcepts = reply.includes('å¹³æ–¹') || reply.includes('å‘¨é•¿') || reply.includes('é¢ç§¯');
            
            if (hasReasoning) score += 3;
            if (hasMath) score += 3;
            if (hasConcepts) score += 2;
            if (reply.length > 100) score += 2;
            
            return { score, hasReasoning, hasMath, hasConcepts };
        }

        function analyzeCreativity(reply) {
            let score = 0;
            
            const hasStory = reply.includes('æ•…äº‹') || reply.includes('ä»å‰') || reply.includes('å°æ˜') || reply.includes('å°çº¢');
            const isVivid = reply.length > 80 && (reply.includes('æƒ³è±¡') || reply.includes('æ¯”å¦‚'));
            const isOriginal = !reply.includes('ç¤ºä¾‹') && !reply.includes('æ¨¡æ¿');
            
            if (hasStory) score += 4;
            if (isVivid) score += 3;
            if (isOriginal) score += 3;
            
            return { score, hasStory, isVivid, isOriginal };
        }

        function analyzeTutoringRealism(reply, responseTime) {
            let score = 0;
            
            // å“åº”æ—¶é—´åˆç†æ€§
            if (responseTime >= 300 && responseTime <= 2000) score += 3;
            
            // æ•™å­¦ä¸“ä¸šæ€§
            if (reply.length < 100 && reply.includes('emoji')) score += 2;
            
            // å¼•å¯¼æ€§è¯­è¨€
            if (reply.includes('æƒ³æƒ³') || reply.includes('è¯•è¯•') || reply.includes('ä½ è§‰å¾—')) score += 2;
            
            // ä¸ç›´æ¥ç»™ç­”æ¡ˆ
            if (!reply.includes('ç­”æ¡ˆæ˜¯') && !reply.includes('ç­‰äº')) score += 2;
            
            // é¼“åŠ±æ€§è¯­è¨€
            if (reply.includes('å¾ˆå¥½') || reply.includes('åŠ æ²¹') || reply.includes('æ£’')) score += 1;
            
            return { score };
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨å¼€å§‹æ£€æŸ¥
        window.onload = function() {
            setTimeout(() => {
                checkConfiguration();
            }, 1000);
        };
    </script>
</body>
</html> 