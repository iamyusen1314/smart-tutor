import{j as es,k as d,l as A,m as ts,c as r,a as s,d as h,n as p,t as o,F as U,r as R,e as u,g as y,p as I,v as f,w as ls,b as _,o as v,_ as os}from"./index-Dk_8qRP-.js";const is={class:"ai-models-container"},ns={class:"tab-navigation"},as={class:"tab-content"},ds={key:0},rs={class:"overview-section"},us={class:"metrics-row"},vs={class:"metric-card"},cs={class:"metric-info"},ms={class:"metric-value"},ps={class:"metric-card"},gs={class:"metric-info"},bs={class:"metric-value"},ys={class:"metric-card"},fs={class:"metric-info"},_s={class:"metric-value"},ws={class:"metric-card"},Ss={class:"metric-info"},ks={class:"metric-value"},Cs={class:"models-status-section"},xs={class:"models-grid"},Ts={class:"model-header"},hs={class:"model-metrics"},qs={class:"model-metric"},Ms={class:"metric-val"},Us={class:"model-metric"},Rs={class:"metric-val"},zs={class:"model-metric"},Vs={class:"metric-val"},js={class:"model-metric"},$s={class:"metric-val"},Ns={class:"system-monitor-section"},Qs={class:"monitor-grid"},Os={class:"monitor-item"},Ds={class:"monitor-value"},Es={class:"monitor-item"},Js={class:"monitor-value"},Ls={class:"monitor-item"},Ps={class:"monitor-value"},As={class:"monitor-item"},Is={class:"monitor-value"},Bs={class:"monitor-item"},Fs={class:"monitor-value"},Gs={class:"monitor-item"},Hs={class:"monitor-value"},Ks={class:"actions-section"},Ws=["disabled"],Xs={class:"last-update"},Ys={key:1},Zs={class:"templates-section"},se={class:"section-header"},ee={class:"subject-filters"},te=["onClick"],le={key:0,class:"loading"},oe={key:1,class:"templates-grid"},ie={class:"template-header"},ne={class:"template-description"},ae={class:"template-stats"},de={class:"template-preview"},re={class:"template-content"},ue={class:"template-actions"},ve=["onClick"],ce=["onClick"],me={key:2},pe={class:"settings-section"},ge={class:"section-header"},be=["disabled"],ye={class:"settings-group"},fe={class:"strategy-settings"},_e={class:"setting-item"},we={class:"setting-item"},Se={class:"setting-item"},ke={class:"setting-item"},Ce={class:"settings-group"},xe={class:"optimization-settings"},Te={class:"setting-item checkbox"},he={class:"setting-item checkbox"},qe={class:"setting-item"},Me=["disabled"],Ue={class:"setting-item"},Re=["disabled"],ze={class:"modal-header"},Ve={class:"modal-body"},je={class:"form-group"},$e={class:"form-group"},Ne={class:"form-group"},Qe={class:"form-group"},Oe=es({__name:"index",setup(De){const c=d("overview"),n=d({dailyStats:{totalRequests:0,averageResponseTime:"0s",costToday:0,efficiency:0},modelStatus:{},realTimeMetrics:{activeConnections:0,queuedRequests:0,processing:0,systemLoad:0,memoryUsage:0,cpuUsage:0}}),w=d(!1),z=d(""),S=d([]),q=d(!1),k=d("all"),g=d(!1),C=d(null),B=[{key:"all",label:"全部科目"},{key:"math",label:"数学"},{key:"chinese",label:"语文"},{key:"english",label:"英语"}],a=d({name:"",subject:"math",description:"",template:""}),i=d({selectionStrategy:{simpleQuestions:"qwen-turbo",normalQuestions:"qwen-plus",complexQuestions:"qwen-max",fallbackModel:"qwen-plus"},optimizationSettings:{enableSmartRouting:!0,enableResponseCaching:!0,maxCacheSize:1e3,cacheExpiry:3600}}),M=d({}),F=A(()=>k.value==="all"?S.value:S.value.filter(l=>l.subject===k.value)),G=A(()=>JSON.stringify(i.value)!==JSON.stringify(M.value)),V=async()=>{try{q.value=!0;const l=await _.get("/api/ai-models/prompt-templates");l.success&&(S.value=l.data.templates,console.log("加载模板成功:",S.value.length,"个模板"))}catch(l){console.error("加载模板失败:",l)}finally{q.value=!1}},H=async()=>{try{const l=await _.get("/api/ai-models/config");l.success&&(i.value={...l.data},M.value=JSON.parse(JSON.stringify(l.data)),console.log("加载设置成功"))}catch(l){console.error("加载设置失败:",l)}},K=async()=>{try{const l=await _.put("/api/ai-models/config",i.value);if(l.success)M.value=JSON.parse(JSON.stringify(i.value)),alert("设置保存成功!");else throw new Error(l.message||"保存失败")}catch(l){console.error("保存设置失败:",l),alert("保存设置失败: "+l.message)}},W=l=>{C.value=l,a.value={...l},g.value=!0},X=l=>{a.value={name:l.name+" (副本)",subject:l.subject,description:l.description,template:l.template},C.value=null,g.value=!0},x=()=>{g.value=!1,C.value=null,a.value={name:"",subject:"math",description:"",template:""}},Y=async()=>{try{const l=await _.post("/api/ai-models/prompt-templates",a.value);if(l.success)await V(),x(),alert("模板保存成功!");else throw new Error(l.message||"保存失败")}catch(l){console.error("保存模板失败:",l),alert("保存模板失败: "+l.message)}},Z=l=>({math:"数学",chinese:"语文",english:"英语"})[l]||l,j=l=>{if(!l)return"未知";const e=new Date().getTime(),T=new Date(l).getTime(),m=e-T;return m<6e4?"刚刚":m<36e5?`${Math.floor(m/6e4)}分钟前`:m<864e5?`${Math.floor(m/36e5)}小时前`:`${Math.floor(m/864e5)}天前`},$=async()=>{try{w.value=!0;const l=await _.get("/api/ai-models/overview");l.success&&(n.value=l.data,z.value=l.data.lastUpdateTime,console.log("刷新监控数据成功"))}catch(l){console.error("刷新监控数据失败:",l)}finally{w.value=!1}};return ts(async()=>{console.log("AI模型管理页面加载中..."),await $(),await V(),await H()}),(l,e)=>{var T,m,N,Q,O,D,E,J,L,P;return v(),r("div",is,[e[61]||(e[61]=s("div",{class:"page-header"},[s("h1",null,"🤖 AI模型管理"),s("p",null,"管理和监控AI模型的状态、性能与配置")],-1)),s("div",ns,[s("button",{onClick:e[0]||(e[0]=t=>c.value="overview"),class:p({active:c.value==="overview"})}," 📊 监控概览 ",2),s("button",{onClick:e[1]||(e[1]=t=>c.value="templates"),class:p({active:c.value==="templates"})}," 📝 提示词模板 ",2),s("button",{onClick:e[2]||(e[2]=t=>c.value="settings"),class:p({active:c.value==="settings"})}," ⚙️ 全局设置 ",2)]),s("div",as,[c.value==="overview"?(v(),r("div",ds,[s("div",rs,[s("div",us,[s("div",vs,[e[18]||(e[18]=s("div",{class:"metric-icon"},"🔥",-1)),s("div",cs,[s("div",ms,o(((T=n.value.dailyStats)==null?void 0:T.totalRequests)||0),1),e[17]||(e[17]=s("div",{class:"metric-label"},"今日请求总数",-1))])]),s("div",ps,[e[20]||(e[20]=s("div",{class:"metric-icon"},"⚡",-1)),s("div",gs,[s("div",bs,o(((m=n.value.dailyStats)==null?void 0:m.averageResponseTime)||"0s"),1),e[19]||(e[19]=s("div",{class:"metric-label"},"平均响应时间",-1))])]),s("div",ys,[e[22]||(e[22]=s("div",{class:"metric-icon"},"💰",-1)),s("div",fs,[s("div",_s,"¥"+o(((N=n.value.dailyStats)==null?void 0:N.costToday)||0),1),e[21]||(e[21]=s("div",{class:"metric-label"},"今日成本",-1))])]),s("div",ws,[e[24]||(e[24]=s("div",{class:"metric-icon"},"📈",-1)),s("div",Ss,[s("div",ks,o(((Q=n.value.dailyStats)==null?void 0:Q.efficiency)||0)+"%",1),e[23]||(e[23]=s("div",{class:"metric-label"},"系统效率",-1))])])]),s("div",Cs,[e[29]||(e[29]=s("h3",null,"🤖 千问模型实时状态",-1)),s("div",xs,[(v(!0),r(U,null,R(n.value.modelStatus,(t,b)=>(v(),r("div",{key:b,class:"model-status-card"},[s("div",Ts,[s("h4",null,o(t.displayName||t.name),1),s("span",{class:p(["status-badge",t.status])},o(t.status==="active"?"🟢 正常":"🔴 异常"),3)]),s("div",hs,[s("div",qs,[e[25]||(e[25]=s("span",{class:"metric-name"},"响应时间:",-1)),s("span",Ms,o(t.responseTime),1)]),s("div",Us,[e[26]||(e[26]=s("span",{class:"metric-name"},"使用率:",-1)),s("span",Rs,o(t.usage),1)]),s("div",zs,[e[27]||(e[27]=s("span",{class:"metric-name"},"成功率:",-1)),s("span",Vs,o(t.successRate)+"%",1)]),s("div",js,[e[28]||(e[28]=s("span",{class:"metric-name"},"最后使用:",-1)),s("span",$s,o(j(t.lastUsed)),1)])])]))),128))])]),s("div",Ns,[e[36]||(e[36]=s("h3",null,"🖥️ 系统实时监控",-1)),s("div",Qs,[s("div",Os,[e[30]||(e[30]=s("div",{class:"monitor-label"},"活跃连接",-1)),s("div",Ds,o(((O=n.value.realTimeMetrics)==null?void 0:O.activeConnections)||0),1)]),s("div",Es,[e[31]||(e[31]=s("div",{class:"monitor-label"},"排队请求",-1)),s("div",Js,o(((D=n.value.realTimeMetrics)==null?void 0:D.queuedRequests)||0),1)]),s("div",Ls,[e[32]||(e[32]=s("div",{class:"monitor-label"},"处理中",-1)),s("div",Ps,o(((E=n.value.realTimeMetrics)==null?void 0:E.processing)||0),1)]),s("div",As,[e[33]||(e[33]=s("div",{class:"monitor-label"},"系统负载",-1)),s("div",Is,o(((J=n.value.realTimeMetrics)==null?void 0:J.systemLoad)||0)+"%",1)]),s("div",Bs,[e[34]||(e[34]=s("div",{class:"monitor-label"},"内存使用",-1)),s("div",Fs,o(((L=n.value.realTimeMetrics)==null?void 0:L.memoryUsage)||0)+"%",1)]),s("div",Gs,[e[35]||(e[35]=s("div",{class:"monitor-label"},"CPU使用",-1)),s("div",Hs,o(((P=n.value.realTimeMetrics)==null?void 0:P.cpuUsage)||0)+"%",1)])])]),s("div",Ks,[s("button",{onClick:$,disabled:w.value,class:"refresh-btn"}," 🔄 "+o(w.value?"刷新中...":"刷新数据"),9,Ws),s("span",Xs," 最后更新: "+o(z.value),1)])])])):h("",!0),c.value==="templates"?(v(),r("div",Ys,[s("div",Zs,[s("div",se,[e[37]||(e[37]=s("h2",null,"📝 基础提示词模板管理",-1)),s("button",{onClick:e[3]||(e[3]=t=>g.value=!0),class:"create-btn"}," ➕ 新建模板 ")]),s("div",ee,[(v(),r(U,null,R(B,t=>s("button",{key:t.key,onClick:b=>k.value=t.key,class:p(["filter-btn",{active:k.value===t.key}])},o(t.label),11,te)),64))]),q.value?(v(),r("div",le," ⏳ 正在加载模板... ")):(v(),r("div",oe,[(v(!0),r(U,null,R(F.value,t=>{var b;return v(),r("div",{key:t.id,class:"template-card"},[s("div",ie,[s("h3",null,o(t.name),1),s("span",{class:p(["subject-badge",t.subject])},o(Z(t.subject)),3)]),s("p",ne,o(t.description),1),s("div",ae,[s("span",null,"📈 使用: "+o(t.usage||0)+"次",1),s("span",null,"✅ 成功率: "+o(t.successRate||0)+"%",1),s("span",null,"🕒 最后使用: "+o(j(t.lastUsed)),1)]),s("div",de,[e[38]||(e[38]=s("strong",null,"模板预览:",-1)),s("div",re,o(((b=t.template)==null?void 0:b.substring(0,100))||"")+"...",1)]),s("div",ue,[s("button",{onClick:ss=>W(t),class:"edit-btn"},"✏️ 编辑",8,ve),s("button",{onClick:ss=>X(t),class:"copy-btn"},"📋 复制",8,ce)])])}),128))]))])])):h("",!0),c.value==="settings"?(v(),r("div",me,[s("div",pe,[s("div",ge,[e[39]||(e[39]=s("h2",null,"⚙️ 全局设置",-1)),s("button",{onClick:K,disabled:!G.value,class:"save-btn"}," 💾 保存设置 ",8,be)]),s("div",ye,[e[48]||(e[48]=s("h3",null,"🎯 智能模型选择策略",-1)),s("div",fe,[s("div",_e,[e[41]||(e[41]=s("label",null,"简单问题使用模型:",-1)),u(s("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>i.value.selectionStrategy.simpleQuestions=t)},e[40]||(e[40]=[s("option",{value:"qwen-turbo"},"千问-Turbo (快速)",-1),s("option",{value:"qwen-plus"},"千问-Plus (平衡)",-1),s("option",{value:"qwen-max"},"千问-Max (高质量)",-1)]),512),[[y,i.value.selectionStrategy.simpleQuestions]])]),s("div",we,[e[43]||(e[43]=s("label",null,"普通问题使用模型:",-1)),u(s("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>i.value.selectionStrategy.normalQuestions=t)},e[42]||(e[42]=[s("option",{value:"qwen-turbo"},"千问-Turbo (快速)",-1),s("option",{value:"qwen-plus"},"千问-Plus (平衡)",-1),s("option",{value:"qwen-max"},"千问-Max (高质量)",-1)]),512),[[y,i.value.selectionStrategy.normalQuestions]])]),s("div",Se,[e[45]||(e[45]=s("label",null,"复杂问题使用模型:",-1)),u(s("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>i.value.selectionStrategy.complexQuestions=t)},e[44]||(e[44]=[s("option",{value:"qwen-turbo"},"千问-Turbo (快速)",-1),s("option",{value:"qwen-plus"},"千问-Plus (平衡)",-1),s("option",{value:"qwen-max"},"千问-Max (高质量)",-1)]),512),[[y,i.value.selectionStrategy.complexQuestions]])]),s("div",ke,[e[47]||(e[47]=s("label",null,"备用模型:",-1)),u(s("select",{"onUpdate:modelValue":e[7]||(e[7]=t=>i.value.selectionStrategy.fallbackModel=t)},e[46]||(e[46]=[s("option",{value:"qwen-turbo"},"千问-Turbo (快速)",-1),s("option",{value:"qwen-plus"},"千问-Plus (平衡)",-1),s("option",{value:"qwen-max"},"千问-Max (高质量)",-1)]),512),[[y,i.value.selectionStrategy.fallbackModel]])])])]),s("div",Ce,[e[55]||(e[55]=s("h3",null,"🚀 性能优化设置",-1)),s("div",xe,[s("div",Te,[u(s("input",{"onUpdate:modelValue":e[8]||(e[8]=t=>i.value.optimizationSettings.enableSmartRouting=t),type:"checkbox",id:"smartRouting"},null,512),[[I,i.value.optimizationSettings.enableSmartRouting]]),e[49]||(e[49]=s("label",{for:"smartRouting"},"启用智能路由",-1)),e[50]||(e[50]=s("small",null,"根据问题复杂度自动选择合适的模型",-1))]),s("div",he,[u(s("input",{"onUpdate:modelValue":e[9]||(e[9]=t=>i.value.optimizationSettings.enableResponseCaching=t),type:"checkbox",id:"responseCaching"},null,512),[[I,i.value.optimizationSettings.enableResponseCaching]]),e[51]||(e[51]=s("label",{for:"responseCaching"},"启用响应缓存",-1)),e[52]||(e[52]=s("small",null,"缓存相似问题的回答以提高响应速度",-1))]),s("div",qe,[e[53]||(e[53]=s("label",null,"最大缓存大小:",-1)),u(s("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>i.value.optimizationSettings.maxCacheSize=t),type:"number",min:"100",max:"10000",disabled:!i.value.optimizationSettings.enableResponseCaching},null,8,Me),[[f,i.value.optimizationSettings.maxCacheSize,void 0,{number:!0}]])]),s("div",Ue,[e[54]||(e[54]=s("label",null,"缓存过期时间 (秒):",-1)),u(s("input",{"onUpdate:modelValue":e[11]||(e[11]=t=>i.value.optimizationSettings.cacheExpiry=t),type:"number",min:"60",max:"86400",disabled:!i.value.optimizationSettings.enableResponseCaching},null,8,Re),[[f,i.value.optimizationSettings.cacheExpiry,void 0,{number:!0}]])])])])])])):h("",!0)]),g.value?(v(),r("div",{key:0,class:"modal-overlay",onClick:x},[s("div",{class:"modal-content",onClick:e[16]||(e[16]=ls(()=>{},["stop"]))},[s("div",ze,[s("h3",null,o(C.value?"编辑模板":"创建新模板"),1),s("button",{onClick:x,class:"close-btn"},"×")]),s("div",Ve,[s("div",je,[e[56]||(e[56]=s("label",null,"模板名称:",-1)),u(s("input",{"onUpdate:modelValue":e[12]||(e[12]=t=>a.value.name=t),type:"text",placeholder:"请输入模板名称"},null,512),[[f,a.value.name]])]),s("div",$e,[e[58]||(e[58]=s("label",null,"适用科目:",-1)),u(s("select",{"onUpdate:modelValue":e[13]||(e[13]=t=>a.value.subject=t)},e[57]||(e[57]=[s("option",{value:"math"},"数学",-1),s("option",{value:"chinese"},"语文",-1),s("option",{value:"english"},"英语",-1)]),512),[[y,a.value.subject]])]),s("div",Ne,[e[59]||(e[59]=s("label",null,"模板描述:",-1)),u(s("textarea",{"onUpdate:modelValue":e[14]||(e[14]=t=>a.value.description=t),placeholder:"请描述该模板的用途和特点"},null,512),[[f,a.value.description]])]),s("div",Qe,[e[60]||(e[60]=s("label",null,"提示词模板:",-1)),u(s("textarea",{"onUpdate:modelValue":e[15]||(e[15]=t=>a.value.template=t),placeholder:"请输入提示词模板，使用 {question}, {student_input} 等占位符",rows:"10"},null,512),[[f,a.value.template]])])]),s("div",{class:"modal-footer"},[s("button",{onClick:x,class:"cancel-btn"},"取消"),s("button",{onClick:Y,class:"confirm-btn"},"保存")])])])):h("",!0)])}}}),Je=os(Oe,[["__scopeId","data-v-ef6f1e9f"]]);export{Je as default};
