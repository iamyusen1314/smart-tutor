import{_ as k,c as o,a as e,d as u,f as p,t as i,e as m,g as f,h as S,v as A,F as y,r as h,n as I,b as c,o as l}from"./index-Dk_8qRP-.js";const P={name:"Questions",data(){return{loading:!1,error:null,questions:[],currentPage:1,totalPages:1,pageSize:10,aiStats:{totalGenerated:0,activeStudents:0,avgAccuracy:0,todayGenerated:0},filters:{subject:"",grade:"",difficulty:"",dateFrom:"",dateTo:""},aiInsights:[]}},async mounted(){var a,t,d;console.log("ğŸ” æ£€æŸ¥APIæœåŠ¡:",{api:!!c,questions:!!((a=c)!=null&&a.questions),getList:!!((d=(t=c)==null?void 0:t.questions)!=null&&d.getList)}),await this.loadQuestions(),await this.loadAIStats(),await this.loadAIInsights()},methods:{async loadQuestions(){var a,t;this.loading=!0,this.error=null;try{if(console.log("ğŸ“š åŠ è½½AIç”Ÿæˆé¢˜ç›®è®°å½•..."),!c||!c.questions||!c.questions.getList)throw new Error("APIæœåŠ¡æœªæ­£ç¡®åˆå§‹åŒ–");const d={page:this.currentPage,limit:this.pageSize,isAIGenerated:!0,...this.filters},g=await c.questions.getList(d);if(g&&g.success)this.questions=((a=g.data)==null?void 0:a.questions)||g.data||[],this.totalPages=Math.ceil((((t=g.data)==null?void 0:t.total)||g.total||0)/this.pageSize),console.log("âœ… AIé¢˜ç›®è®°å½•åŠ è½½æˆåŠŸ:",this.questions.length);else throw new Error((g==null?void 0:g.message)||"è·å–é¢˜ç›®è®°å½•å¤±è´¥")}catch(d){console.error("âŒ åŠ è½½AIé¢˜ç›®è®°å½•å¤±è´¥:",d),this.error=d.message,(d.message.includes("API")||d.message.includes("ç½‘ç»œ")||d.message.includes("åˆå§‹åŒ–"))&&(console.log("ğŸ­ åŠ è½½æ¨¡æ‹Ÿæ•°æ®ä½œä¸ºå¤‡é€‰æ–¹æ¡ˆ"),this.loadMockData())}finally{this.loading=!1}},async loadAIStats(){try{if(c&&c.analytics&&c.analytics.getAIGenerationStats){const a=await c.analytics.getAIGenerationStats();a&&a.success&&(this.aiStats=a.data)}}catch(a){console.warn("è·å–AIç»Ÿè®¡å¤±è´¥:",a),this.aiStats={totalGenerated:1247,activeStudents:89,avgAccuracy:76,todayGenerated:23}}},async loadAIInsights(){try{if(c&&c.analytics&&c.analytics.getAIInsights){const a=await c.analytics.getAIInsights({limit:5,type:"question_generation"});a&&a.success&&(this.aiInsights=a.data||[])}}catch(a){console.warn("è·å–AIæ´å¯Ÿå¤±è´¥:",a),this.aiInsights=[{id:1,type:"é¢˜ç›®éš¾åº¦åˆ†æ",content:"å‘ç°å­¦ç”Ÿåœ¨åˆ†æ•°è®¡ç®—æ–¹é¢æ­£ç¡®ç‡è¾ƒä½(62%)ï¼ŒAIå·²è‡ªåŠ¨è°ƒæ•´ç”Ÿæˆæ›´å¤šåŸºç¡€ç»ƒä¹ é¢˜",timestamp:new Date().toISOString()},{id:2,type:"å­¦ä¹ æ¨¡å¼è¯†åˆ«",content:"æ£€æµ‹åˆ°è§†è§‰å­¦ä¹ å‹å­¦ç”Ÿå¢å¤šï¼ŒAIæ­£åœ¨ç”Ÿæˆæ›´å¤šå›¾å½¢åŒ–æ•°å­¦é¢˜",timestamp:new Date(Date.now()-36e5).toISOString()}]}},loadMockData(){console.log("ğŸ­ åŠ è½½æ¨¡æ‹ŸAIç”Ÿæˆé¢˜ç›®æ•°æ®"),this.questions=[{id:1,content:"å°æ˜æœ‰24ä¸ªè‹¹æœï¼Œå¹³å‡åˆ†ç»™6ä¸ªæœ‹å‹ï¼Œæ¯ä¸ªæœ‹å‹åˆ†åˆ°å‡ ä¸ªè‹¹æœï¼Ÿ",subject:"math",grade:3,difficulty:"easy",type:"calculation",answer:"4ä¸ª",explanation:"24Ã·6=4ï¼Œæ‰€ä»¥æ¯ä¸ªæœ‹å‹åˆ†åˆ°4ä¸ªè‹¹æœ",knowledgePoints:["é™¤æ³•è¿ç®—","å¹³å‡åˆ†é…"],isAIGenerated:!0,generationContext:{triggerType:"OCRè¯†åˆ«",description:"å­¦ç”Ÿæ‹ç…§äº†ç±»ä¼¼çš„é™¤æ³•åº”ç”¨é¢˜",weakPoints:["é™¤æ³•è¿ç®—"]},usageStats:{attempts:5,accuracy:.8,avgTime:2.5},createdAt:new Date().toISOString()},{id:2,content:"ä¸‹åˆ—å“ªä¸ªç®—å¼çš„ç»“æœæ˜¯12ï¼Ÿ",options:["3Ã—4","2Ã—7","6+5","15-3"],subject:"math",grade:2,difficulty:"medium",type:"choice",answer:"A",explanation:"3Ã—4=12ï¼Œå…¶ä»–é€‰é¡¹ï¼šB=14ï¼ŒC=11ï¼ŒD=12ï¼Œæ‰€ä»¥Aå’ŒDéƒ½æ­£ç¡®ï¼Œä½†Aæ˜¯æœ€ç›´æ¥çš„ç­”æ¡ˆ",knowledgePoints:["ä¹˜æ³•è¿ç®—","åŠ å‡æ³•è¿ç®—"],isAIGenerated:!0,generationContext:{triggerType:"è–„å¼±ç‚¹å¼ºåŒ–",description:"é’ˆå¯¹è¯¥å­¦ç”Ÿçš„ä¹˜æ³•è¿ç®—è–„å¼±ç‚¹ç”Ÿæˆ",weakPoints:["ä¹˜æ³•è¿ç®—","æ•°å­¦è¿ç®—"]},usageStats:{attempts:8,accuracy:.75,avgTime:1.8},createdAt:new Date(Date.now()-864e5).toISOString()},{id:3,content:"ä¸€ä¸ªé•¿æ–¹å½¢çš„é•¿æ˜¯8cmï¼Œå®½æ˜¯5cmï¼Œæ±‚è¿™ä¸ªé•¿æ–¹å½¢çš„å‘¨é•¿ã€‚",subject:"math",grade:4,difficulty:"medium",type:"calculation",answer:"26cm",explanation:"é•¿æ–¹å½¢å‘¨é•¿ = 2Ã—(é•¿+å®½) = 2Ã—(8+5) = 2Ã—13 = 26cm",knowledgePoints:["é•¿æ–¹å½¢å‘¨é•¿","å‡ ä½•è®¡ç®—"],isAIGenerated:!0,generationContext:{triggerType:"å­¦ä¹ è®¡åˆ’å®šåˆ¶",description:"æ ¹æ®å­¦ç”Ÿå½“å‰å­¦ä¹ è¿›åº¦ç”Ÿæˆçš„å‡ ä½•é¢˜",weakPoints:["å‡ ä½•è®¡ç®—"]},usageStats:{attempts:3,accuracy:.67,avgTime:3.2},createdAt:new Date(Date.now()-1728e5).toISOString()}],this.totalPages=1},changePage(a){this.currentPage=a,this.loadQuestions()},getSubjectName(a){return{math:"æ•°å­¦",chinese:"è¯­æ–‡",english:"è‹±è¯­"}[a]||a},getDifficultyName(a){return{easy:"ç®€å•",medium:"ä¸­ç­‰",hard:"å›°éš¾"}[a]||a},formatDate(a){if(!a)return"";const t=new Date(a),g=new Date-t;return g<6e4?"åˆšåˆš":g<36e5?`${Math.floor(g/6e4)}åˆ†é’Ÿå‰`:g<864e5?`${Math.floor(g/36e5)}å°æ—¶å`:g<6048e5?`${Math.floor(g/864e5)}å¤©å‰`:t.toLocaleDateString()},viewDetails(a){console.log("æŸ¥çœ‹é¢˜ç›®è¯¦æƒ…:",a),alert(`é¢˜ç›®è¯¦æƒ…ï¼š

${JSON.stringify(a,null,2)}`)},viewStudentProgress(a){var t,d,g;console.log("æŸ¥çœ‹å­¦ç”Ÿè¡¨ç°:",a),alert(`å­¦ç”Ÿè¡¨ç°åˆ†æï¼š

ä½¿ç”¨æ¬¡æ•°ï¼š${((t=a.usageStats)==null?void 0:t.attempts)||0}
æ­£ç¡®ç‡ï¼š${(((d=a.usageStats)==null?void 0:d.accuracy)*100||0).toFixed(1)}%
å¹³å‡ç”¨æ—¶ï¼š${((g=a.usageStats)==null?void 0:g.avgTime)||0}åˆ†é’Ÿ`)},async regenerateQuestion(a){var t;if(confirm("ç¡®å®šè¦è®©AIé‡æ–°ç”Ÿæˆè¿™é“é¢˜ç›®å—ï¼Ÿ"))try{if(console.log("ğŸ¤– è¯·æ±‚AIé‡æ–°ç”Ÿæˆé¢˜ç›®:",a.id),!c||!c.aiGenerator||!c.aiGenerator.regenerateQuestion)throw new Error("AIç”ŸæˆæœåŠ¡ä¸å¯ç”¨");const d=await c.aiGenerator.regenerateQuestion({questionId:a.id,reason:"low_accuracy",currentAccuracy:((t=a.usageStats)==null?void 0:t.accuracy)||0});if(d&&d.success)alert("âœ… AIé‡æ–°ç”Ÿæˆè¯·æ±‚å·²æäº¤ï¼Œæ–°é¢˜ç›®å°†åœ¨ä¸‹æ¬¡å­¦ä¹ ä¸­å±•ç¤ºç»™å­¦ç”Ÿ"),this.loadQuestions();else throw new Error((d==null?void 0:d.message)||"é‡æ–°ç”Ÿæˆå¤±è´¥")}catch(d){console.error("âŒ AIé‡æ–°ç”Ÿæˆå¤±è´¥:",d),alert(`âŒ é‡æ–°ç”Ÿæˆå¤±è´¥: ${d.message}`)}},async refreshData(){await Promise.all([this.loadQuestions(),this.loadAIStats(),this.loadAIInsights()])},async testAPI(){try{if(console.log("ğŸ§ª æµ‹è¯•AIç”ŸæˆAPI..."),!c||!c.aiGenerator||!c.aiGenerator.generatePractice)throw new Error("AIç”ŸæˆæœåŠ¡ä¸å¯ç”¨");const a={ocrData:{analyzedContent:"3Ã—4=?",subject:"math",grade:3,knowledgePoints:["ä¹˜æ³•è¿ç®—"]},studentProfile:{userId:"test_student",grade:3,preferredSubjects:["math"],averageAccuracy:.75},learningHistory:[],weakPoints:[{knowledgePoint:"ä¹˜æ³•è¿ç®—",errorRate:.4}]},t=await c.aiGenerator.generatePractice(a);console.log("âœ… APIæµ‹è¯•æˆåŠŸ:",t),alert(`âœ… AIç”ŸæˆAPIæµ‹è¯•æˆåŠŸï¼

`+JSON.stringify(t,null,2))}catch(a){console.error("âŒ APIæµ‹è¯•å¤±è´¥:",a),alert(`âŒ APIæµ‹è¯•å¤±è´¥: ${a.message}`)}}}},_={class:"questions-container"},b={class:"stats-panel"},C={class:"stat-card"},D={class:"stat-number"},x={class:"stat-card"},Q={class:"stat-number"},G={class:"stat-card"},T={class:"stat-number"},j={class:"stat-card"},N={class:"stat-number"},V={class:"filter-section"},M={class:"filter-row"},O={key:0,class:"loading"},F={key:1,class:"error-message"},E={key:2,class:"questions-list"},L={key:0,class:"empty-state"},z={key:1},U={class:"question-header"},B={class:"question-meta"},J={class:"grade-tag"},R={key:0,class:"ai-tag"},H={class:"question-time"},K={class:"question-content"},W={key:0,class:"ai-context"},X={key:0,class:"weak-points"},Y={key:1,class:"question-options"},Z={class:"option-label"},q={class:"option-text"},$={class:"answer-section"},tt={class:"answer"},et={key:0,class:"explanation"},st={key:2,class:"knowledge-points"},at={key:3,class:"usage-stats"},nt={class:"stat-item"},ot={class:"stat-value"},it={class:"stat-item"},lt={class:"stat-value"},rt={class:"stat-item"},dt={class:"stat-value"},ct={class:"question-actions"},gt=["onClick"],ut=["onClick"],vt=["onClick"],pt={key:3,class:"pagination"},mt=["disabled"],yt={class:"page-info"},ht=["disabled"],ft={key:4,class:"ai-insights-panel"},It={class:"insights-list"},wt={class:"insight-type"},At={class:"insight-content"},kt={class:"insight-time"},St={class:"debug-section"};function Pt(a,t,d,g,n,r){return l(),o("div",_,[t[35]||(t[35]=e("div",{class:"page-header"},[e("h1",null,[e("i",{class:"icon"},"ğŸ¤–"),p(" AIé¢˜ç›®ç”Ÿæˆè®°å½• ")]),e("p",{class:"description"}," æŸ¥çœ‹AIæ ¹æ®å­¦ç”Ÿå­¦ä¹ è¡Œä¸ºåŠ¨æ€ç”Ÿæˆçš„ä¸ªæ€§åŒ–é¢˜ç›®è®°å½• ")],-1)),e("div",b,[e("div",C,[e("div",D,i(n.aiStats.totalGenerated),1),t[15]||(t[15]=e("div",{class:"stat-label"},"AIç”Ÿæˆé¢˜ç›®æ€»æ•°",-1))]),e("div",x,[e("div",Q,i(n.aiStats.activeStudents),1),t[16]||(t[16]=e("div",{class:"stat-label"},"æ´»è·ƒå­¦ç”Ÿæ•°",-1))]),e("div",G,[e("div",T,i(n.aiStats.avgAccuracy)+"%",1),t[17]||(t[17]=e("div",{class:"stat-label"},"å¹³å‡å‡†ç¡®ç‡",-1))]),e("div",j,[e("div",N,i(n.aiStats.todayGenerated),1),t[18]||(t[18]=e("div",{class:"stat-label"},"ä»Šæ—¥ç”Ÿæˆé¢˜ç›®",-1))])]),e("div",V,[e("div",M,[m(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>n.filters.subject=s),onChange:t[1]||(t[1]=(...s)=>r.loadQuestions&&r.loadQuestions(...s))},t[19]||(t[19]=[e("option",{value:""},"å…¨éƒ¨å­¦ç§‘",-1),e("option",{value:"math"},"æ•°å­¦",-1),e("option",{value:"chinese"},"è¯­æ–‡",-1),e("option",{value:"english"},"è‹±è¯­",-1)]),544),[[f,n.filters.subject]]),m(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>n.filters.grade=s),onChange:t[3]||(t[3]=(...s)=>r.loadQuestions&&r.loadQuestions(...s))},t[20]||(t[20]=[S('<option value="" data-v-7509ae4c>å…¨éƒ¨å¹´çº§</option><option value="1" data-v-7509ae4c>ä¸€å¹´çº§</option><option value="2" data-v-7509ae4c>äºŒå¹´çº§</option><option value="3" data-v-7509ae4c>ä¸‰å¹´çº§</option><option value="4" data-v-7509ae4c>å››å¹´çº§</option><option value="5" data-v-7509ae4c>äº”å¹´çº§</option><option value="6" data-v-7509ae4c>å…­å¹´çº§</option>',7)]),544),[[f,n.filters.grade]]),m(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>n.filters.difficulty=s),onChange:t[5]||(t[5]=(...s)=>r.loadQuestions&&r.loadQuestions(...s))},t[21]||(t[21]=[e("option",{value:""},"å…¨éƒ¨éš¾åº¦",-1),e("option",{value:"easy"},"ç®€å•",-1),e("option",{value:"medium"},"ä¸­ç­‰",-1),e("option",{value:"hard"},"å›°éš¾",-1)]),544),[[f,n.filters.difficulty]]),m(e("input",{type:"date","onUpdate:modelValue":t[6]||(t[6]=s=>n.filters.dateFrom=s),onChange:t[7]||(t[7]=(...s)=>r.loadQuestions&&r.loadQuestions(...s)),placeholder:"å¼€å§‹æ—¥æœŸ"},null,544),[[A,n.filters.dateFrom]]),m(e("input",{type:"date","onUpdate:modelValue":t[8]||(t[8]=s=>n.filters.dateTo=s),onChange:t[9]||(t[9]=(...s)=>r.loadQuestions&&r.loadQuestions(...s)),placeholder:"ç»“æŸæ—¥æœŸ"},null,544),[[A,n.filters.dateTo]]),e("button",{onClick:t[10]||(t[10]=(...s)=>r.refreshData&&r.refreshData(...s)),class:"refresh-btn"},t[22]||(t[22]=[e("i",{class:"icon"},"ğŸ”„",-1),p(" åˆ·æ–°æ•°æ® ")]))])]),n.loading?(l(),o("div",O,t[23]||(t[23]=[e("i",{class:"icon"},"â³",-1),p(" æ­£åœ¨åŠ è½½AIç”Ÿæˆçš„é¢˜ç›®è®°å½•... ")]))):u("",!0),n.error?(l(),o("div",F,[t[24]||(t[24]=e("i",{class:"icon"},"âŒ",-1)),p(" "+i(n.error)+" ",1),e("button",{onClick:t[11]||(t[11]=(...s)=>r.loadQuestions&&r.loadQuestions(...s)),class:"retry-btn"},"é‡è¯•")])):u("",!0),!n.loading&&!n.error?(l(),o("div",E,[n.questions.length===0?(l(),o("div",L,t[25]||(t[25]=[e("i",{class:"icon"},"ğŸ¤–",-1),e("h3",null,"æš‚æ— AIç”Ÿæˆé¢˜ç›®",-1),e("p",null,"å½“å­¦ç”Ÿå¼€å§‹ä½¿ç”¨æ‹ç…§å­¦ä¹ åŠŸèƒ½æ—¶ï¼ŒAIä¼šè‡ªåŠ¨ç”Ÿæˆä¸ªæ€§åŒ–ç»ƒä¹ é¢˜",-1)]))):(l(),o("div",z,[(l(!0),o(y,null,h(n.questions,s=>(l(),o("div",{key:s._id||s.id,class:I(["question-card",{"ai-generated":s.isAIGenerated}])},[e("div",U,[e("div",B,[e("span",{class:I(["subject-tag",s.subject])},i(r.getSubjectName(s.subject)),3),e("span",J,i(s.grade)+"å¹´çº§",1),e("span",{class:I(["difficulty-tag",s.difficulty])},i(r.getDifficultyName(s.difficulty)),3),s.isAIGenerated?(l(),o("span",R," ğŸ¤– AIç”Ÿæˆ ")):u("",!0)]),e("div",H,i(r.formatDate(s.createdAt)),1)]),e("div",K,[e("h4",null,i(s.content||s.text),1),s.generationContext?(l(),o("div",W,[t[27]||(t[27]=e("h5",null,"ğŸ¯ ç”ŸæˆèƒŒæ™¯:",-1)),e("p",null,i(s.generationContext.triggerType)+": "+i(s.generationContext.description),1),s.generationContext.weakPoints&&s.generationContext.weakPoints.length>0?(l(),o("div",X,[t[26]||(t[26]=e("strong",null,"é’ˆå¯¹è–„å¼±ç‚¹:",-1)),(l(!0),o(y,null,h(s.generationContext.weakPoints,v=>(l(),o("span",{key:v,class:"weak-point-tag"},i(v),1))),128))])):u("",!0)])):u("",!0),s.options&&s.options.length>0?(l(),o("div",Y,[(l(!0),o(y,null,h(s.options,(v,w)=>(l(),o("div",{key:w,class:"option"},[e("span",Z,i(String.fromCharCode(65+w))+".",1),e("span",q,i(v),1)]))),128))])):u("",!0),e("div",$,[e("div",tt,[t[28]||(t[28]=e("strong",null,"ç­”æ¡ˆ:",-1)),p(" "+i(s.answer),1)]),s.explanation?(l(),o("div",et,[t[29]||(t[29]=e("strong",null,"è§£æ:",-1)),p(" "+i(s.explanation),1)])):u("",!0)]),s.knowledgePoints&&s.knowledgePoints.length>0?(l(),o("div",st,[t[30]||(t[30]=e("strong",null,"çŸ¥è¯†ç‚¹:",-1)),(l(!0),o(y,null,h(s.knowledgePoints,v=>(l(),o("span",{key:v,class:"knowledge-tag"},i(v),1))),128))])):u("",!0),s.usageStats?(l(),o("div",at,[e("div",nt,[t[31]||(t[31]=e("span",{class:"stat-label"},"ä½¿ç”¨æ¬¡æ•°:",-1)),e("span",ot,i(s.usageStats.attempts||0),1)]),e("div",it,[t[32]||(t[32]=e("span",{class:"stat-label"},"æ­£ç¡®ç‡:",-1)),e("span",lt,i((s.usageStats.accuracy*100).toFixed(1))+"%",1)]),e("div",rt,[t[33]||(t[33]=e("span",{class:"stat-label"},"å¹³å‡ç”¨æ—¶:",-1)),e("span",dt,i(s.usageStats.avgTime)+"åˆ†é’Ÿ",1)])])):u("",!0)]),e("div",ct,[e("button",{onClick:v=>r.viewDetails(s),class:"details-btn"}," æŸ¥çœ‹è¯¦æƒ… ",8,gt),e("button",{onClick:v=>r.viewStudentProgress(s),class:"progress-btn"}," å­¦ç”Ÿè¡¨ç° ",8,ut),s.usageStats&&s.usageStats.accuracy<.5?(l(),o("button",{key:0,onClick:v=>r.regenerateQuestion(s),class:"regenerate-btn"}," ğŸ¤– é‡æ–°ç”Ÿæˆ ",8,vt)):u("",!0)])],2))),128))]))])):u("",!0),n.totalPages>1?(l(),o("div",pt,[e("button",{disabled:n.currentPage<=1,onClick:t[12]||(t[12]=s=>r.changePage(n.currentPage-1)),class:"page-btn"}," ä¸Šä¸€é¡µ ",8,mt),e("span",yt," ç¬¬ "+i(n.currentPage)+" é¡µï¼Œå…± "+i(n.totalPages)+" é¡µ ",1),e("button",{disabled:n.currentPage>=n.totalPages,onClick:t[13]||(t[13]=s=>r.changePage(n.currentPage+1)),class:"page-btn"}," ä¸‹ä¸€é¡µ ",8,ht)])):u("",!0),n.aiInsights.length>0?(l(),o("div",ft,[t[34]||(t[34]=e("h3",null,"ğŸ¤– AIåˆ†ææ´å¯Ÿ",-1)),e("div",It,[(l(!0),o(y,null,h(n.aiInsights,s=>(l(),o("div",{key:s.id,class:"insight-item"},[e("div",wt,i(s.type),1),e("div",At,i(s.content),1),e("div",kt,i(r.formatDate(s.timestamp)),1)]))),128))])])):u("",!0),e("div",St,[e("button",{onClick:t[14]||(t[14]=(...s)=>r.testAPI&&r.testAPI(...s)),class:"test-btn"}," ğŸ§ª æµ‹è¯•AIç”ŸæˆAPI ")])])}const bt=k(P,[["render",Pt],["__scopeId","data-v-7509ae4c"]]);export{bt as default};
