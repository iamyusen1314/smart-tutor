<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¯ AIèŠå¤©é¡µé¢UIæµ‹è¯•</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
        }
        .test-section {
            margin: 30px 0;
            padding: 25px;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            background: #f9f9f9;
        }
        .test-title {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .test-item {
            margin: 15px 0;
            padding: 15px;
            background: white;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }
        .test-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            margin: 5px;
            transition: all 0.3s ease;
        }
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }
        .result-box {
            margin-top: 15px;
            padding: 15px;
            background: #f0f8ff;
            border-radius: 8px;
            border-left: 4px solid #4CAF50;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 200px;
            overflow-y: auto;
        }
        .status {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            margin-left: 10px;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
        }
        .status.pending {
            background: #fff3cd;
            color: #856404;
        }
        .improvements {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-top: 30px;
        }
        .improvement-item {
            display: flex;
            align-items: center;
            margin: 10px 0;
            padding: 10px;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
        }
        .improvement-icon {
            font-size: 24px;
            margin-right: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¯ AIèŠå¤©é¡µé¢UIä¼˜åŒ–æµ‹è¯•</h1>
            <p style="color: #666; font-size: 18px;">éªŒè¯æ‰€æœ‰ç”¨æˆ·éœ€æ±‚æ”¹è¿›æ˜¯å¦æ­£å¸¸å·¥ä½œ</p>
        </div>

        <!-- ç­”æ¡ˆæ£€æŸ¥åŠŸèƒ½æµ‹è¯• -->
        <div class="test-section">
            <h2 class="test-title">âœ… ç­”æ¡ˆæ£€æŸ¥åŠŸèƒ½æµ‹è¯•</h2>
            
            <div class="test-item">
                <strong>æ­£ç¡®ç­”æ¡ˆæµ‹è¯•ï¼š</strong>
                <button class="test-button" onclick="testAnswerCheck('3+5=?', '8', true)">
                    æµ‹è¯•æ­£ç¡®ç­”æ¡ˆ (3+5=8)
                </button>
                <div id="answer-check-correct" class="result-box" style="display: none;"></div>
            </div>

            <div class="test-item">
                <strong>é”™è¯¯ç­”æ¡ˆæµ‹è¯•ï¼š</strong>
                <button class="test-button" onclick="testAnswerCheck('3+5=?', '7', false)">
                    æµ‹è¯•é”™è¯¯ç­”æ¡ˆ (3+5=7)
                </button>
                <div id="answer-check-incorrect" class="result-box" style="display: none;"></div>
            </div>

            <div class="test-item">
                <strong>å¤æ‚é¢˜ç›®æµ‹è¯•ï¼š</strong>
                <button class="test-button" onclick="testAnswerCheck('å°æ˜æœ‰15ä¸ªè‹¹æœï¼Œåƒäº†3ä¸ªï¼Œè¿˜å‰©å‡ ä¸ªï¼Ÿ', '12', true)">
                    æµ‹è¯•åº”ç”¨é¢˜ (15-3=12)
                </button>
                <div id="answer-check-complex" class="result-box" style="display: none;"></div>
            </div>
        </div>

        <!-- AIèŠå¤©åŠŸèƒ½æµ‹è¯• -->
        <div class="test-section">
            <h2 class="test-title">ğŸ’¬ AIèŠå¤©åŠŸèƒ½æµ‹è¯•</h2>
            
            <div class="test-item">
                <strong>æ™ºèƒ½å›å¤æµ‹è¯•ï¼š</strong>
                <button class="test-button" onclick="testAIChat('æˆ‘ä¸æ‡‚è¿™é“é¢˜')">
                    æµ‹è¯•"æˆ‘ä¸æ‡‚"
                </button>
                <button class="test-button" onclick="testAIChat('å†ç»™æˆ‘ä¸€ä¸ªæç¤º')">
                    æµ‹è¯•"å†æç¤º"
                </button>
                <button class="test-button" onclick="testAIChat('èƒ½è¯¦ç»†è§£é‡Šä¸€ä¸‹å—')">
                    æµ‹è¯•"è¯¦ç»†è§£é‡Š"
                </button>
                <div id="ai-chat-result" class="result-box" style="display: none;"></div>
            </div>
        </div>

        <!-- æ¨¡å‹é€Ÿåº¦æµ‹è¯• -->
        <div class="test-section">
            <h2 class="test-title">âš¡ AIæ¨¡å‹é€Ÿåº¦æµ‹è¯•</h2>
            
            <div class="test-item">
                <strong>ä¸åŒæ¨¡å‹å“åº”é€Ÿåº¦ï¼š</strong>
                <button class="test-button" onclick="testModelSpeed('quick')">
                    å¿«é€Ÿæ¨¡å‹ (qwen-turbo)
                </button>
                <button class="test-button" onclick="testModelSpeed('standard')">
                    æ ‡å‡†æ¨¡å‹ (qwen-plus)
                </button>
                <button class="test-button" onclick="testModelSpeed('deep')">
                    æ·±åº¦æ¨¡å‹ (qwen-max)
                </button>
                <div id="model-speed-result" class="result-box" style="display: none;"></div>
            </div>
        </div>

        <!-- UIæ”¹è¿›éªŒè¯ -->
        <div class="improvements">
            <h2 style="margin-top: 0;">ğŸ¨ UIæ”¹è¿›éªŒè¯æ¸…å•</h2>
            
            <div class="improvement-item">
                <span class="improvement-icon">âœ…</span>
                <div>
                    <strong>1. å¸ƒå±€é‡æ–°è®¾è®¡</strong><br>
                    æ¨¡å¼åˆ‡æ¢æŒ‰é’®ä»åº•éƒ¨ç§»åˆ°é¢˜ç›®ä¸‹æ–¹ï¼Œå¸ƒå±€æ›´åˆç†
                </div>
            </div>
            
            <div class="improvement-item">
                <span class="improvement-icon">âœ…</span>
                <div>
                    <strong>2. å†…è”ç­”æ¡ˆè¾“å…¥</strong><br>
                    ç­”æ¡ˆè¾“å…¥æ¡†ç›´æ¥åœ¨é¢˜ç›®åé¢ï¼Œæ›´åŠ ç›´è§‚
                </div>
            </div>
            
            <div class="improvement-item">
                <span class="improvement-icon">âœ…</span>
                <div>
                    <strong>3. å¿«æ·å›å¤ä¼˜åŒ–</strong><br>
                    æ”¹ä¸º"æˆ‘ä¸æ‡‚"ã€"å†æç¤º"ã€"è¯¦ç»†è§£é‡Š"ï¼Œæ›´å®ç”¨
                </div>
            </div>
            
            <div class="improvement-item">
                <span class="improvement-icon">âœ…</span>
                <div>
                    <strong>4. æäº¤ç­”æ¡ˆåŠŸèƒ½</strong><br>
                    å®Œå–„ç­”æ¡ˆæäº¤å’Œå®æ—¶æ£€æŸ¥åŠŸèƒ½
                </div>
            </div>
            
            <div class="improvement-item">
                <span class="improvement-icon">âœ…</span>
                <div>
                    <strong>5. ç‹¬ç«‹èŠå¤©åŒºåŸŸ</strong><br>
                    èŠå¤©åŒºåŸŸä¸ç­”é¢˜åŒºåŸŸåˆ†ç¦»ï¼Œç•Œé¢æ›´æ¸…æ™°
                </div>
            </div>
            
            <div class="improvement-item">
                <span class="improvement-icon">âœ…</span>
                <div>
                    <strong>6. æ™ºèƒ½AIèŠå¤©</strong><br>
                    æ¥å…¥çœŸå®é˜¿é‡Œåƒé—®å¤§æ¨¡å‹ï¼Œæ”¯æŒå³æ—¶æ™ºèƒ½å¯¹è¯
                </div>
            </div>
        </div>
    </div>

    <script>
        const baseUrl = 'http://192.168.31.180:3000';

        // æµ‹è¯•ç­”æ¡ˆæ£€æŸ¥åŠŸèƒ½
        async function testAnswerCheck(question, answer, expectedCorrect) {
            const resultId = expectedCorrect ? 'answer-check-correct' : 
                           answer === '7' ? 'answer-check-incorrect' : 'answer-check-complex';
            const resultBox = document.getElementById(resultId);
            
            resultBox.style.display = 'block';
            resultBox.textContent = 'ğŸ”„ æ£€æŸ¥ä¸­...';

            try {
                const startTime = Date.now();
                const response = await fetch(`${baseUrl}/api/ai-chat/check-answer`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        question: question,
                        studentAnswer: answer,
                        subject: 'math',
                        grade: '2'
                    })
                });

                const data = await response.json();
                const responseTime = Date.now() - startTime;

                if (data.success) {
                    resultBox.innerHTML = `âœ… ç­”æ¡ˆæ£€æŸ¥æˆåŠŸï¼

ğŸ“ é¢˜ç›®: ${question}
ğŸ’­ å­¦ç”Ÿç­”æ¡ˆ: ${answer}
${data.data.isCorrect ? 'ğŸ‰' : 'ğŸ¤”'} ç»“æœ: ${data.data.isCorrect ? 'æ­£ç¡®' : 'é”™è¯¯'}
ğŸ’¬ AIåé¦ˆ: ${data.data.feedback}
ğŸ¤– ä½¿ç”¨æ¨¡å‹: ${data.data.model}
âš¡ å“åº”æ—¶é—´: ${responseTime}ms (${data.data.responseTime}ms)

${data.data.isCorrect === expectedCorrect ? 'âœ… é¢„æœŸç»“æœåŒ¹é…ï¼' : 'âŒ ç»“æœä¸ç¬¦åˆé¢„æœŸ'}`;
                } else {
                    throw new Error(data.message || 'ç­”æ¡ˆæ£€æŸ¥å¤±è´¥');
                }
            } catch (error) {
                resultBox.innerHTML = `âŒ æµ‹è¯•å¤±è´¥: ${error.message}`;
            }
        }

        // æµ‹è¯•AIèŠå¤©åŠŸèƒ½
        async function testAIChat(studentInput) {
            const resultBox = document.getElementById('ai-chat-result');
            resultBox.style.display = 'block';
            resultBox.textContent = 'ğŸ¤– AIæ€è€ƒä¸­...';

            try {
                const startTime = Date.now();
                const response = await fetch(`${baseUrl}/api/ai-chat/tutoring`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        question: '3+5ç­‰äºå¤šå°‘ï¼Ÿ',
                        studentInput: studentInput,
                        subject: 'math',
                        grade: '2',
                        currentStep: 'understanding',
                        chatHistory: []
                    })
                });

                const data = await response.json();
                const responseTime = Date.now() - startTime;

                if (data.success) {
                    resultBox.innerHTML = `âœ… AIèŠå¤©æµ‹è¯•æˆåŠŸï¼

ğŸ‘§ å­¦ç”Ÿè¾“å…¥: "${studentInput}"
ğŸ¤– AIå›å¤: ${data.data.aiResponse}
ğŸ“Š å½“å‰æ­¥éª¤: ${data.data.currentStep}
ğŸ¯ å›å¤ç±»å‹: ${data.data.responseType}
ğŸ¤– ä½¿ç”¨æ¨¡å‹: ${data.data.model}
âš¡ å“åº”æ—¶é—´: ${responseTime}ms (${data.data.responseTime}ms)

âœ… AIæ­£ç¡®ç†è§£äº†å­¦ç”Ÿéœ€æ±‚å¹¶ç»™å‡ºäº†æ°å½“å›å¤ï¼`;
                } else {
                    throw new Error(data.message || 'AIèŠå¤©å¤±è´¥');
                }
            } catch (error) {
                resultBox.innerHTML = `âŒ æµ‹è¯•å¤±è´¥: ${error.message}`;
            }
        }

        // æµ‹è¯•æ¨¡å‹é€Ÿåº¦
        async function testModelSpeed(modelType) {
            const resultBox = document.getElementById('model-speed-result');
            resultBox.style.display = 'block';
            resultBox.textContent = `âš¡ æµ‹è¯•${modelType}æ¨¡å‹é€Ÿåº¦...`;

            try {
                const startTime = Date.now();
                const response = await fetch(`${baseUrl}/api/ai-chat/test-speed?modelType=${modelType}`);
                const data = await response.json();
                const totalTime = Date.now() - startTime;

                if (data.success) {
                    resultBox.innerHTML = `âœ… æ¨¡å‹é€Ÿåº¦æµ‹è¯•æˆåŠŸï¼

ğŸ¤– æ¨¡å‹ç±»å‹: ${data.data.model}
ğŸ“ AIå›å¤: ${data.data.content}
â±ï¸ é¢„æœŸæ—¶é—´: ${data.data.expectedTime}
âš¡ å®é™…å“åº”: ${data.data.responseTime}ms
ğŸŒ æ€»è¯·æ±‚æ—¶é—´: ${totalTime}ms
ğŸ“… æµ‹è¯•æ—¶é—´: ${data.data.timestamp}

${data.data.responseTime < 2000 ? 'ğŸš€ å“åº”é€Ÿåº¦ä¼˜ç§€ï¼' : 
  data.data.responseTime < 5000 ? 'âœ… å“åº”é€Ÿåº¦è‰¯å¥½' : 'âš ï¸ å“åº”ç¨æ…¢'}`;
                } else {
                    throw new Error(data.message || 'é€Ÿåº¦æµ‹è¯•å¤±è´¥');
                }
            } catch (error) {
                resultBox.innerHTML = `âŒ æµ‹è¯•å¤±è´¥: ${error.message}`;
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨è¿›è¡ŒåŸºç¡€æµ‹è¯•
        window.onload = function() {
            console.log('ğŸ¯ AIèŠå¤©é¡µé¢UIæµ‹è¯•é¡µé¢åŠ è½½å®Œæˆ');
            console.log('âœ… æ‰€æœ‰åŠŸèƒ½å‡†å¤‡å°±ç»ªï¼Œå¯ä»¥å¼€å§‹æµ‹è¯•ï¼');
        };
    </script>
</body>
</html> 