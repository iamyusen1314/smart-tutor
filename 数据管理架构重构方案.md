# æ•°æ®ç®¡ç†æ¶æ„é‡æ„æ–¹æ¡ˆ

## ğŸ“Š é—®é¢˜åˆ†æ

é€šè¿‡ä»£ç å®¡æŸ¥å‘ç°ï¼Œç›®å‰å°ç¨‹åºä¸­å¤§é‡å…³é”®æ•°æ®ä»åœ¨ä½¿ç”¨æœ¬åœ°å­˜å‚¨ï¼ˆlocalStorageï¼‰ï¼Œè¿™ä¼šåœ¨å°ç¨‹åºå‘å¸ƒåå¼•èµ·ä»¥ä¸‹é—®é¢˜ï¼š

1. **æ•°æ®ä¸¢å¤±é£é™©** - ç”¨æˆ·æ¸…ç†ç¼“å­˜ã€æ¢è®¾å¤‡æ—¶æ•°æ®ä¸¢å¤±
2. **æ— æ³•è·¨è®¾å¤‡åŒæ­¥** - å­¦ä¹ è¿›åº¦æ— æ³•åœ¨å¤šè®¾å¤‡é—´åŒæ­¥
3. **ç»Ÿè®¡åˆ†æå›°éš¾** - æ— æ³•è¿›è¡Œç”¨æˆ·è¡Œä¸ºåˆ†æå’Œå­¦ä¹ æ•ˆæœè¯„ä¼°
4. **æ•°æ®ä¸ä¸€è‡´** - æœ¬åœ°æ•°æ®ä¸äº‘ç«¯æ•°æ®å¯èƒ½å‡ºç°ä¸åŒæ­¥

## ğŸ¯ é‡æ„ç›®æ ‡

1. **ç»Ÿä¸€æ•°æ®ç®¡ç†** - æ‰€æœ‰å­¦ä¹ ç›¸å…³æ•°æ®ç»Ÿä¸€ä½¿ç”¨MongoDBç®¡ç†
2. **ä¿è¯æ•°æ®å®‰å…¨** - å…³é”®æ•°æ®äº‘ç«¯å­˜å‚¨ï¼Œé¿å…æ•°æ®ä¸¢å¤±
3. **æ”¯æŒç¦»çº¿åŠŸèƒ½** - å…³é”®æ•°æ®æœ¬åœ°ç¼“å­˜ï¼Œæ”¯æŒå¼±ç½‘ç¯å¢ƒ
4. **ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ** - æ•°æ®åŠ è½½å¿«é€Ÿï¼Œæ“ä½œæµç•…

## ğŸ“‹ æ•°æ®åˆ†ç±»ä¸è¿ç§»è®¡åˆ’

### ğŸ”„ éœ€è¦è¿ç§»åˆ°MongoDBçš„æ•°æ®

#### 1. å­¦ä¹ æ•°æ® (currentLearningData)
```javascript
// å½“å‰ä½ç½®ï¼šwx.getStorageSync('currentLearningData')
// è¿ç§»åˆ°ï¼š/api/learning/current-data
{
  planId: String,
  userId: String,
  questions: Array,
  currentIndex: Number,
  progress: Object,
  subject: String,
  grade: Number
}
```

#### 2. å­¦ä¹ ç»“æœ (currentLearningResult)
```javascript
// å½“å‰ä½ç½®ï¼šwx.getStorageSync('currentLearningResult')
// è¿ç§»åˆ°ï¼š/api/learning/results
{
  planId: String,
  userId: String,
  totalQuestions: Number,
  correctAnswers: Number,
  accuracy: Number,
  completionTime: Date
}
```

#### 3. å­¦ä¹ å†å²è®°å½•
```javascript
// skipHistory, timeUpHistory, overtimeHistory
// è¿ç§»åˆ°ï¼š/api/learning/history
{
  userId: String,
  type: String, // 'skip', 'timeout', 'overtime'
  questionId: String,
  timestamp: Date,
  context: Object
}
```

### ğŸ’¾ ä¿ç•™æœ¬åœ°å­˜å‚¨çš„æ•°æ®

#### 1. èº«ä»½è®¤è¯ç›¸å…³
```javascript
// ä¿ç•™æœ¬åœ°ç¼“å­˜ï¼Œæå‡ç”¨æˆ·ä½“éªŒ
- token
- userInfo 
- userId
```

#### 2. åº”ç”¨é…ç½®
```javascript
// ä¿ç•™æœ¬åœ°é…ç½®
- server_ip
- server_port
- app settings
```

## ğŸ—ï¸ æ–°å¢APIæ¥å£è®¾è®¡

### 1. å­¦ä¹ æ•°æ®ç®¡ç†API

```javascript
// è·å–å½“å‰å­¦ä¹ æ•°æ®
GET /api/learning/current-data?userId={userId}&planId={planId}

// ä¿å­˜å­¦ä¹ è¿›åº¦
POST /api/learning/save-progress
{
  userId: String,
  planId: String,
  currentIndex: Number,
  answers: Array,
  timestamp: Date
}

// å®Œæˆå­¦ä¹ 
POST /api/learning/complete
{
  userId: String,
  planId: String,
  results: Object,
  completedAt: Date
}
```

### 2. å­¦ä¹ å†å²API

```javascript
// è®°å½•å­¦ä¹ è¡Œä¸º
POST /api/learning/record-action
{
  userId: String,
  action: String, // 'skip', 'timeout', 'overtime', 'answer'
  questionId: String,
  context: Object
}

// è·å–å­¦ä¹ å†å²
GET /api/learning/history?userId={userId}&type={type}
```

## ğŸ”§ å‰ç«¯æ”¹é€ è®¡åˆ’

### é˜¶æ®µä¸€ï¼šåˆ›å»ºæ•°æ®æœåŠ¡å±‚
```javascript
// utils/learningDataService.js
class LearningDataService {
  // è·å–å­¦ä¹ æ•°æ®ï¼ˆå…ˆä»æœ¬åœ°ç¼“å­˜ï¼Œå†ä»APIï¼‰
  async getCurrentLearningData(userId, planId) {}
  
  // ä¿å­˜å­¦ä¹ è¿›åº¦ï¼ˆæœ¬åœ°+äº‘ç«¯åŒå†™ï¼‰
  async saveLearningProgress(data) {}
  
  // åŒæ­¥æ•°æ®ï¼ˆä¸Šä¼ æœ¬åœ°æ•°æ®åˆ°äº‘ç«¯ï¼‰
  async syncToCloud() {}
}
```

### é˜¶æ®µäºŒï¼šæ”¹é€ ç°æœ‰é¡µé¢
1. **ai-chat.js** - ç§»é™¤æœ¬åœ°å­˜å‚¨ä¾èµ–
2. **report.js** - ä»APIè·å–å­¦ä¹ ç»“æœ
3. **plan.js** - å­¦ä¹ æ•°æ®äº‘ç«¯ç®¡ç†

### é˜¶æ®µä¸‰ï¼šæ•°æ®è¿ç§»å·¥å…·
```javascript
// ç”¨æˆ·æ•°æ®è¿ç§»API
POST /api/migration/migrate-user-data
{
  userId: String,
  localData: Object // æœ¬åœ°å­˜å‚¨çš„æ‰€æœ‰æ•°æ®
}
```

## ğŸ“± å…·ä½“å®æ–½æ­¥éª¤

### Step 1: åç«¯APIå¼€å‘
1. åˆ›å»ºå­¦ä¹ æ•°æ®ç®¡ç†API
2. æ‰©å±•ç°æœ‰æ•°æ®æ¨¡å‹
3. æ·»åŠ æ•°æ®åŒæ­¥æœºåˆ¶

### Step 2: å‰ç«¯æ•°æ®æœåŠ¡å±‚
1. åˆ›å»ºç»Ÿä¸€çš„æ•°æ®æœåŠ¡
2. å®ç°æœ¬åœ°ç¼“å­˜ + äº‘ç«¯å­˜å‚¨ç­–ç•¥
3. æ·»åŠ ç¦»çº¿æ”¯æŒ

### Step 3: é¡µé¢æ”¹é€ 
1. AIèŠå¤©é¡µé¢æ•°æ®ç®¡ç†æ”¹é€ 
2. å­¦ä¹ æŠ¥å‘Šé¡µé¢äº‘ç«¯æ•°æ®è·å–
3. å­¦ä¹ è®¡åˆ’é¡µé¢æ•°æ®åŒæ­¥

### Step 4: æ•°æ®è¿ç§»
1. ç°æœ‰ç”¨æˆ·æ•°æ®è¿ç§»
2. æ–°æ—§ç³»ç»Ÿå…¼å®¹æ€§å¤„ç†
3. æ•°æ®éªŒè¯å’Œä¿®å¤

## ğŸ’¡ å…³é”®æŠ€æœ¯å®ç°

### 1. æ··åˆå­˜å‚¨ç­–ç•¥
```javascript
// å…³é”®æ•°æ®ï¼šäº‘ç«¯ä¸ºä¸»ï¼Œæœ¬åœ°ç¼“å­˜
// é…ç½®æ•°æ®ï¼šæœ¬åœ°ä¸ºä¸»
// ä¸´æ—¶æ•°æ®ï¼šæœ¬åœ°å­˜å‚¨
```

### 2. æ•°æ®åŒæ­¥æœºåˆ¶
```javascript
// è‡ªåŠ¨åŒæ­¥ï¼šç½‘ç»œæ¢å¤æ—¶è‡ªåŠ¨ä¸Šä¼ 
// æ‰‹åŠ¨åŒæ­¥ï¼šç”¨æˆ·ä¸»åŠ¨è§¦å‘
// å†²çªè§£å†³ï¼šäº‘ç«¯æ•°æ®ä¼˜å…ˆ
```

### 3. ç¦»çº¿æ”¯æŒ
```javascript
// å…³é”®åŠŸèƒ½ç¦»çº¿å¯ç”¨
// æ•°æ®å˜æ›´æœ¬åœ°æš‚å­˜
// ç½‘ç»œæ¢å¤æ—¶æ‰¹é‡åŒæ­¥
```

## ğŸ¯ é¢„æœŸæ”¶ç›Š

1. **æ•°æ®å®‰å…¨æ€§** - 99.9%æ•°æ®ä¸ä¸¢å¤±
2. **ç”¨æˆ·ä½“éªŒ** - è·¨è®¾å¤‡æ— ç¼å­¦ä¹ 
3. **åˆ†æèƒ½åŠ›** - å…¨é¢çš„å­¦ä¹ è¡Œä¸ºåˆ†æ
4. **æ‰©å±•æ€§** - æ”¯æŒæ›´å¤šåŠŸèƒ½å’Œåœºæ™¯

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å‘åå…¼å®¹** - è€ç‰ˆæœ¬æ•°æ®å¹³æ»‘è¿ç§»
2. **æ€§èƒ½ä¼˜åŒ–** - é¿å…é¢‘ç¹ç½‘ç»œè¯·æ±‚
3. **é”™è¯¯å¤„ç†** - ç½‘ç»œå¼‚å¸¸æ—¶çš„ç”¨æˆ·ä½“éªŒ
4. **éšç§ä¿æŠ¤** - ç”¨æˆ·æ•°æ®åŠ å¯†å’Œæƒé™æ§åˆ¶

## ğŸ“… å®æ–½æ—¶é—´è¡¨

- **Week 1**: åç«¯APIå¼€å‘
- **Week 2**: å‰ç«¯æ•°æ®æœåŠ¡å±‚
- **Week 3**: é¡µé¢æ”¹é€ å’Œæµ‹è¯•
- **Week 4**: æ•°æ®è¿ç§»å’Œä¸Šçº¿ 